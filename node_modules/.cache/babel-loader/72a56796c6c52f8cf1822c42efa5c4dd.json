{"ast":null,"code":"var _jsxFileName = \"/home/nte-461-vm/Desktop/nettantra/sails-frontend/library-app/src/component/CartScreen.js\",\n    _s = $RefreshSig$();\n\nimport \"./CartScreen.css\";\nimport { useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { useHistory } from 'react-router-dom'; // Components\n// import CartItem from \"../components/CartItem\";\n// Actions\n\nimport { addToCart, removeFromCart } from \"../redux/actions/cartActions\";\nimport axios from \"axios\"; // import { response } from \"express\";\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst CartScreen = () => {\n  _s();\n\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const cart = useSelector(state => state.cart); //   const { cartItems } = cart;\n  // const [cartproduct,setCartproduct]=useState([])\n  //   useEffect( () => {\n  //     // \n  //     const tUser = localStorage.getItem('user')\n  //     const useri = tUser ? JSON.parse(tUser) : ''\n  //     console.log(\"bjfwbjf\",useri)\n  //     const data=useri._id\n  //     console.log(\"not happened\",data)\n  //      axios.get(`http://localhost:5000/api/user/cartitem/${data}` )\n  //     .then((response) => {\n  //       console.log('here is the data from DB', response.data);\n  //       // setCartproduct(response.data)\n  //     }, (error) => {\n  //       console.log(error);\n  //     });\n  //   }, []);\n  // console.log('hjvsfabkrfebalrk',cartproduct)\n\n  const userId = localStorage.getItem('user');\n\n  const qtyChangeHandler = (id, qty) => {\n    dispatch(addToCart(id, qty));\n  };\n\n  const removeFromCartHandler = id => {\n    dispatch(removeFromCart(id));\n  };\n\n  const getCartCount = () => {\n    return cartItems.reduce((qty, item) => Number(item.qty) + qty, 0);\n  };\n\n  const getCartSubTotal = () => {\n    return cartItems.reduce((price, item) => price + item.price * item.qty, 0).toFixed(2);\n  };\n\n  const chekOut = () => {\n    alert('Order Placed successfully');\n    history.push('/');\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: !userId ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cartscreen\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cartscreen__left\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Shopping Cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), cartItems.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Your Cart Is Empty \", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/\",\n            children: \"Go Back\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 34\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this) : cartItems.map(item => /*#__PURE__*/_jsxDEV(CartItem, {\n          item: item,\n          qtyChangeHandler: qtyChangeHandler,\n          removeHandler: removeFromCartHandler\n        }, item.product, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cartscreen__right\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cartscreen__info\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Subtotal (\", getCartCount(), \") items\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: getCartSubTotal()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: chekOut,\n            children: \"Proceed To Checkout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"comming soon,..\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }, this) //   <div className=\"cartscreen\">\n    //   <div className=\"cartscreen__left\">\n    //     <h2>Shopping Cart</h2>\n    //     {response.data.length === 0 ? (\n    //       <div>\n    //         Your Cart Is Empty <Link to=\"/\">Go Back</Link>\n    //       </div>\n    //     ) : (\n    //       response.data.map((item) => (\n    //         <CartItem\n    //           key={item.product}\n    //           item={item}\n    //           qtyChangeHandler={qtyChangeHandler}\n    //           removeHandler={removeFromCartHandler}\n    //         />\n    //       ))\n    //     )}\n    //   </div>\n    //   <div className=\"cartscreen__right\">\n    //     <div className=\"cartscreen__info\">\n    //       <p>Subtotal ({getCartCount()}) items</p>\n    //       <p>{getCartSubTotal()}</p>\n    //     </div>\n    //     <div>\n    //       <button onClick={chekOut}>Proceed To Checkout</button>\n    //     </div>\n    //   </div>\n    // </div>\n\n  }, void 0, false);\n};\n\n_s(CartScreen, \"hhB/LaCTWCaa88rJnKUM3gLFpME=\", false, function () {\n  return [useHistory, useDispatch, useSelector];\n});\n\n_c = CartScreen;\nexport default CartScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartScreen\");","map":{"version":3,"sources":["/home/nte-461-vm/Desktop/nettantra/sails-frontend/library-app/src/component/CartScreen.js"],"names":["useEffect","useState","useSelector","useDispatch","Link","useHistory","addToCart","removeFromCart","axios","CartScreen","history","dispatch","cart","state","userId","localStorage","getItem","qtyChangeHandler","id","qty","removeFromCartHandler","getCartCount","cartItems","reduce","item","Number","getCartSubTotal","price","toFixed","chekOut","alert","push","length","map","product"],"mappings":"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","sourcesContent":["import \"./CartScreen.css\";\nimport { useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { useHistory } from 'react-router-dom'\n\n// Components\n// import CartItem from \"../components/CartItem\";\n\n// Actions\nimport { addToCart, removeFromCart } from \"../redux/actions/cartActions\";\nimport axios from \"axios\";\n// import { response } from \"express\";\n\n\nconst CartScreen = () => {\n  const history = useHistory()\n\n  const dispatch = useDispatch();\n\n  const cart = useSelector((state) => state.cart);\n//   const { cartItems } = cart;\n\n  // const [cartproduct,setCartproduct]=useState([])\n//   useEffect( () => {\n//     // \n//     const tUser = localStorage.getItem('user')\n//     const useri = tUser ? JSON.parse(tUser) : ''\n//     console.log(\"bjfwbjf\",useri)\n//     const data=useri._id\n//     console.log(\"not happened\",data)\n//      axios.get(`http://localhost:5000/api/user/cartitem/${data}` )\n//     .then((response) => {\n//       console.log('here is the data from DB', response.data);\n//       // setCartproduct(response.data)\n//     }, (error) => {\n//       console.log(error);\n//     });\n//   }, []);\n\n  // console.log('hjvsfabkrfebalrk',cartproduct)\n\n\n  const userId = localStorage.getItem('user')\n\n  \n\n  const qtyChangeHandler = (id, qty) => {\n    dispatch(addToCart(id, qty));\n  };\n\n  const removeFromCartHandler = (id) => {\n    dispatch(removeFromCart(id));\n  };\n\n  const getCartCount = () => {\n    return cartItems.reduce((qty, item) => Number(item.qty) + qty, 0);\n  };\n\n  const getCartSubTotal = () => {\n    return cartItems\n      .reduce((price, item) => price + item.price * item.qty, 0)\n      .toFixed(2);\n  };\n\n  const chekOut = () => {\n    alert('Order Placed successfully')\n    history.push('/')\n\n  }\n\n\n\n  return (\n    <>\n    {!userId ?(\n      <div className=\"cartscreen\">\n        <div className=\"cartscreen__left\">\n          <h2>Shopping Cart</h2>\n\n          {cartItems.length === 0 ? (\n            <div>\n              Your Cart Is Empty <Link to=\"/\">Go Back</Link>\n            </div>\n          ) : (\n            cartItems.map((item) => (\n              <CartItem\n                key={item.product}\n                item={item}\n                qtyChangeHandler={qtyChangeHandler}\n                removeHandler={removeFromCartHandler}\n              />\n            ))\n          )}\n        </div>\n\n        <div className=\"cartscreen__right\">\n          <div className=\"cartscreen__info\">\n            <p>Subtotal ({getCartCount()}) items</p>\n            <p>{getCartSubTotal()}</p>\n          </div>\n          <div>\n            <button onClick={chekOut}>Proceed To Checkout</button>\n          </div>\n        </div>\n      </div>\n      ):(\n        <div>comming soon,..</div>\n      //   <div className=\"cartscreen\">\n      //   <div className=\"cartscreen__left\">\n      //     <h2>Shopping Cart</h2>\n\n      //     {response.data.length === 0 ? (\n      //       <div>\n      //         Your Cart Is Empty <Link to=\"/\">Go Back</Link>\n      //       </div>\n      //     ) : (\n      //       response.data.map((item) => (\n      //         <CartItem\n      //           key={item.product}\n      //           item={item}\n      //           qtyChangeHandler={qtyChangeHandler}\n      //           removeHandler={removeFromCartHandler}\n      //         />\n      //       ))\n      //     )}\n      //   </div>\n\n      //   <div className=\"cartscreen__right\">\n      //     <div className=\"cartscreen__info\">\n      //       <p>Subtotal ({getCartCount()}) items</p>\n      //       <p>{getCartSubTotal()}</p>\n      //     </div>\n      //     <div>\n      //       <button onClick={chekOut}>Proceed To Checkout</button>\n      //     </div>\n      //   </div>\n      // </div>\n      )\n      }\n    </>\n  );\n};\n\nexport default CartScreen;\n"]},"metadata":{},"sourceType":"module"}